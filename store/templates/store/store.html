{% extends 'store/main.html' %} 
{% load static %} 
{% load humanize %}
{% block content %} 
{% if user.is_authenticated %}
<h1>Bienvenido {{user.username|title}}</h1>
{% endif %}
<div class="row">
  {% for product in object_list %}
  <div class="col-lg-4">
    <img class="thumbnail img-fluid" src="{{product.photo.url}}" />
    <div class="box-element product">
      <h4 {% if product.digital %} class="text-success" {% endif %}>
        <strong>{{product.name|title}}</strong>
      </h4>
      <hr />
      {% if user.is_authenticated %}
      <form method='post' style="display:inline;">
        {% csrf_token %}
        <input type="hidden" name="action" value="add_cart">
        <input type="hidden" name="product" value="{{product.id}}">
        <input class="btn btn-outline-secondary" type="submit" value="Agregar Carrito">
      </form>
      {% endif %}
      
      <a class="btn btn-outline-success" href="{% url 'detalle_product' product.id %}">Ver</a>
      <h5 style="display: inline-block; float: right">
        <strong>${{product.price|intcomma}}</strong>
      </h5>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock content %} 

{% block js %}
{% if not object_list %}
<script>
  Swal.fire({
  title: 'No se encontrÃ³ el producto',
  icon: 'question'
}).then((result) => { //con then recibo el resultado de lo que ponga el usuario, en este caso solo confirma pq solo esta ese boton
  if (result.isConfirmed) { //si lo confirma, lo redirecciono a la url store
    window.location.href = "{% url 'store' %}";
  }
});
  </script>
{% endif %}
{% endblock js %}